文档创建时间：2019.10.23

博客已经上线了，原始设想的两大功能也都完成了，所以上一个阶段的开发已经结束了。

但是整体来看，这个博客依然是非常简陋的，还需要持续完善。

这一期的目标是：1. 新增内容管理平台 2. 扩增2个数据源 3. 改善上一版本遗留的一些问题
    
总结一下这期任务就是一提升一新功能一扩源。

打算先做内容管理平台，内容管理平台任务

### 改善上一版本遗留的一些问题。

    1. 爬虫类的改进
       把现有的content中的爬虫与HTML解析分离。
       形成seed content parser 三个独立的模块，降低系统的耦合性，每个模块职能更加专一，整体代码更加可维护
       完成 2019.10.31  
    
    3. ETL层的新增
       就是所谓的parser
       多一个数据库，线上数据库不变(最后增加了一个status字段)，spider入库方式作出改变，字段也进行修改
       完成 2019.10.31
       
    3. 时间字段修改为时间戳
       提供更加准确的时间存储 datetime.datetime(2015, 4, 19, 12, 20)
       
    4. 显示成距离现在的时间

    5. 日志的添加
    
    6. 定时任务的添加
    
### 新增内容管理平台。

    功能描述 
    - 管理员登陆，权限验证等相关功能
    - 内容的增删改查等
    
    1. 登陆，权限认证
       完成 2019.10.24  
       由于没有开发用户注册及用户权限管理系统，所以控制账号是通过后台直接添加的，密码的哈希是通过flask shell 命令完成的
       开发坑记录： 路由与认证装饰器顺序搞反了，导致权限验证未能生效。正确的顺序应该是先路由，后验证。
       原理：装饰的顺序按靠近函数顺序执行，从内到外装饰，调用时由外而内，执行顺序和装饰顺序相反
   
    2. 内容资源列表，可以新增、修改、删除内容
       完成 2019.10.25
       坑记录：在删除完成后，直接查询数据库，返回最新的数据状态。 应该是redirect到当前页面
       
    3. 内容编辑页面及预览内容，修改完可以保存内容，格式Markdown  
       使用markdown.md这个插件作为编辑器。
       完成 2019.10.27
       
    4. 数据字段坑
       PostgreSQL Datetime 字段为timestamps
       在插入数据时， 应使用 datetime.datetime(2015, 4, 19, 12, 20)
       完成 2019.10.29
       
    5. 文章插入图片
       坑记录： 在进行文件写入时，写入的文件夹路径用的是pathlib生成的路径，需要确保路径的类型是str。
       完成 2019.10.29
        
### 扩增2个数据源

    1. https://blog.ansheng.me/
    2. https://www.the5fire.com/
    




   
   